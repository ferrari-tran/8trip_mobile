/*! UIkit 3.0.0-beta.32 | http://www.getuikit.com | (c) 2014 - 2017 YOOtheme | MIT License */

!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define("uikitsortable",i):t.UIkitSortable=i()}(this,function(){"use strict";function t(i){function e(t){return i.getComponent(t,"sortable")||t.parentNode&&e(t.parentNode)}if(!t.installed){var s=i.mixin,o=i.util,r=o.$$,h=o.addClass,l=o.after,n=o.assign,a=o.append,c=o.attr,d=o.before,p=o.closest,u=o.css,f=o.doc,g=o.docEl,m=o.height,v=o.fastdom,$=o.getPos,b=o.includes,y=o.index,x=o.isInput,S=o.noop,k=o.offset,w=o.off,E=o.on,D=o.pointerDown,C=o.pointerMove,Y=o.pointerUp,I=o.position,N=o.preventClick,P=o.Promise,H=o.remove,T=o.removeClass,M=o.toggleClass,U=o.toNodes,B=o.Transition,L=o.trigger,j=o.win,W=o.within;i.component("sortable",{mixins:[s.class],props:{group:String,animation:Number,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},defaults:{group:!1,animation:150,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1},init:function(){var t=this;["init","start","move","end"].forEach(function(i){var e=t[i];t[i]=function(i){t.scrollY=j.scrollY;var s=$(i),o=s.x,r=s.y;t.pos={x:o,y:r},e(i)}})},events:(z={},z[D]="init",z),update:{write:function(){if(this.clsEmpty&&M(this.$el,this.clsEmpty,!this.$el.children.length),this.drag){k(this.drag,{top:this.pos.y+this.origin.top,left:this.pos.x+this.origin.left});var t,i=k(this.drag).top,e=i+this.drag.offsetHeight;i>0&&i<this.scrollY?t=this.scrollY-5:e<m(f)&&e>m(j)+this.scrollY&&(t=this.scrollY+5),t&&setTimeout(function(){return j.scrollTo(j.scrollX,t)},5)}}},methods:{init:function(t){var i=t.target,e=t.button,s=t.defaultPrevented,o=U(this.$el.children).filter(function(t){return W(i,t)})[0];!o||x(t.target)||this.handle&&!W(i,this.handle)||0!==e||W(i,"."+this.clsNoDrag)||s||(t.preventDefault(),this.touched=[this],this.placeholder=o,this.origin=n({target:i,index:y(o)},this.pos),E(g,C,this.move),E(g,Y,this.end),E(j,"scroll",this.scroll),this.threshold||this.start(t))},start:function(t){this.drag=a(i.container,this.placeholder.outerHTML.replace(/^<li/i,"<div").replace(/li>$/i,"div>")),u(this.drag,n({boxSizing:"border-box",width:this.placeholder.offsetWidth,height:this.placeholder.offsetHeight},u(this.placeholder,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),c(this.drag,"uk-no-boot",""),h(this.drag,this.clsDrag+" "+this.clsCustom),m(this.drag.firstElementChild,m(this.placeholder.firstElementChild));var e=k(this.placeholder),s=e.left,o=e.top;n(this.origin,{left:s-this.pos.x,top:o-this.pos.y}),h(this.placeholder,this.clsPlaceholder),h(this.$el.children,this.clsItem),h(g,this.clsDragState),L(this.$el,"start",[this,this.placeholder,this.drag]),this.move(t)},move:function(t){if(this.drag){this.$emit();var i="mousemove"===t.type?t.target:f.elementFromPoint(this.pos.x-f.body.scrollLeft,this.pos.y-f.body.scrollTop),s=e(i),o=e(this.placeholder),r=s!==o;if(s&&!W(i,this.placeholder)&&(!r||s.group&&s.group===o.group)){if(i=s.$el===i.parentNode&&i||U(s.$el.children).filter(function(t){return W(i,t)})[0],r)o.remove(this.placeholder);else if(!i)return;s.insert(this.placeholder,i),b(this.touched,s)||this.touched.push(s)}}else(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},scroll:function(){var t=j.scrollY;t!==this.scrollY&&(this.pos.y+=t-this.scrollY,this.scrollY=t,this.$emit())},end:function(t){if(w(g,C,this.move),w(g,Y,this.end),w(j,"scroll",this.scroll),this.drag){N();var i=e(this.placeholder);this===i?this.origin.index!==y(this.placeholder)&&L(this.$el,"change",[this,this.placeholder,"moved"]):(L(i.$el,"change",[i,this.placeholder,"added"]),L(this.$el,"change",[this,this.placeholder,"removed"])),L(this.$el,"stop",[this]),H(this.drag),this.drag=null;var s=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return T(t.$el.children,s)}),T(g,this.clsDragState)}else"mouseup"!==t.type&&W(t.target,"a[href]")&&(location.href=p(t.target,"a[href]").href)},insert:function(t,i){var e=this;h(this.$el.children,this.clsItem);var s=function(){i?!W(t,e.$el)||r("-",t).some(function(t){return t===i})?d(i,t):l(i,t):a(e.$el,t)};this.animation?this.animate(s):s()},remove:function(t){W(t,this.$el)&&(this.animation?this.animate(function(){return H(t)}):H(t))},animate:function(t){var i=this,e=[],s=U(this.$el.children),o={position:"",width:"",height:"",pointerEvents:"",top:"",left:"",bottom:"",right:""};s.forEach(function(t){e.push(n({position:"absolute",pointerEvents:"none",width:t.offsetWidth,height:t.offsetHeight},I(t)))}),t(),s.forEach(B.cancel),u(s,o),this.$update("update",!0),v.flush(),u(this.$el,"minHeight",m(this.$el));var r=s.map(function(t){return I(t)});P.all(s.map(function(t,s){return B.start(u(t,e[s]),r[s],i.animation)})).then(function(){u(i.$el,"minHeight",""),u(s,o),i.$update("update",!0),v.flush()},S)}}});var z}}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.use(t),t});